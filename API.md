# API Guide

This document summarizes the REST endpoints exposed by the AIXcel backend.

Base URL: `http://localhost:6889`

## Health

- **GET /health** – Simple check that returns `ok` if the backend is running.

## Cells

- **GET /cells?sheet=name** – List all cells for the given sheet (`sheet1` by default).
- **POST /cells** – Insert or update a single cell.
  - JSON body fields:
    - `sheet` *(optional)* – sheet name (defaults to `sheet1`).
    - `row` – zero-based row index.
    - `col` – zero-based column index.
    - `value` – cell value; formulas starting with `=` are evaluated on save.
    - `font_weight`, `font_style`, `background_color` *(optional)* – formatting.
- **POST /cells/bulk** – Insert or update multiple cells at once.
  - Body is an array of the same objects accepted by `/cells`.
- **POST /cells/clear** – Remove multiple cells.
  - Body: `{ "cells": [{"sheet":"sheet1","row":0,"col":0}, ...] }`

## Formula Evaluation

- **POST /evaluate** – Evaluate a formula without storing it.
  - Body: `{ "expr": "=SUM(1,2,3)", "sheet": "sheet1" }`
  - Returns the string result or an error message.

## Sheets

- **GET /sheets** – List available sheets in order of creation.
- **POST /sheets** – Create a new sheet.
  - Body: `{ "name": "sheet2" }` (name optional; autogenerated if omitted).
- **DELETE /sheets/{name}** – Delete a sheet and all of its cells.

## WebSocket

- **GET /ws** – Upgrade to a WebSocket connection for real-time cell updates.
  - Messages use JSON with event structures like `CellUpdate`, `UserJoined`, and `UserLeft`.

